<main class="contents-container design-container">
  <div class="bredcrumb">
    <%= link_to "ホーム", root_path, class:"bredcrumb-link" %> 
    > <%= link_to @post.title, post_path(@post.id), class:"bredcrumb-post-name" %>
    > 投稿を編集
  </div>
  <div class="form-wrapper">
    <h3>マイデザインを編集</h3>
      <%= form_with model: @post, class:"form" do |f| %>
        <div class="row mb-3">
          <%= f.label :title ,"タイトル", class: "col-sm-3 col-form-label" %>
          <div class="col-sm-7">
            <%= f.text_field :title, class: "form-control" %>
          </div>
        </div>
        <div class="row mb-3">
          <%= f.label :image ,"画像", class: "col-sm-3 col-form-label" %>
          <div class="col-sm-7">
            <%= f.file_field :image, class: "form-control" %>
            <%= image_tag @post.image, class:"form-post-image" if @post.image.attached? %>
            <div id="image-list"></div>
          </div>
        </div>
        <% if @post.category.root? %>
          <div class="append__category">
            <div class="row mb-3">
              <%= f.label :category_id ,"カテゴリー", class: "col-sm-3 col-form-label", local: true %>
              <div class="col-sm-9">
                <%= f.collection_select :category_id, @set_parents, :id, :name,{ include_blank: "選択してください"}, class:"select_field form-control", id:"post_category_id", required: true %>
              </div>
            </div>
          </div>
        <% else %>
          <div class="append__category">
            <div class="row mb-3">
              <%= f.label :category_id ,"カテゴリー", class: "col-sm-3 col-form-label", local: true %>
              <div class="col-sm-9">
                <%= f.collection_select :category_id, @set_parents, :id, :name,{ include_blank: "選択してください", selected: @post.category.parent.id}, class:"select_field form-control", id:"post_category_id", required: true %>
              </div>
            </div>
            <div class="row mb-3" id="exist_children_wrapper">
              <%= f.label :category_id ,"サブカテゴリー", class: "col-sm-3 col-form-label", local: true %>
              <div class="col-sm-9">
                <%= f.collection_select :category_id, @set_childs, :id, :name,{ include_blank: "選択してください", selected: @post.category.id}, class:"select_field form-control", id:"post_category_id", required: true %>
              </div>
            </div>
          </div>
        <% end %>
        <div class="row mb-3">
          <%= f.label :work_id ,"作品ID", class: "col-sm-3 col-form-label" %>
          <div class="col-sm-7">
            <%= f.text_field :work_id, class: "form-control" %>
          </div>
        </div>
        <div class="row mb-3">
          <%= f.label :author_id ,"作者ID", class: "col-sm-3 col-form-label" %>
          <div class="col-sm-7">
            <%= f.text_field :author_id, class: "form-control" %>
          </div>
        </div>
        <div class="row mb-3">
          <%= f.label :text ,"コメント", class: "col-sm-3 col-form-label" %>
          <div class="col-sm-7">
            <%= f.text_area :text, class: "form-control" %>
          </div>
        </div>
        <div class="form-btn-wrapper">
          <%= link_to :back do %>
            <button type="button" class="cancel-btn">キャンセル</button>
          <% end %>
          <%= f.submit "更新する", class:"submit-btn" %>
        </div>
      <% end %>
  </div>
</main>
